# {{ environment_name | upper }} Environment Configuration
# Generated on: {{ ansible_date_time.iso8601 }}
# Version: {{ app_version | default('latest') }}

# Database Configuration
MYSQL_ROOT_PASSWORD={{ mysql_root_password }}
MYSQL_DATABASE={{ mysql_database }}
MYSQL_USER={{ mysql_user }}
MYSQL_PASSWORD={{ mysql_password }}
MYSQL_PORT={{ mysql_port }}

# Backend Configuration
DATABASE_URL={{ database_url }}
SECRET_KEY={{ secret_key }}
ALGORITHM={{ algorithm }}
ACCESS_TOKEN_EXPIRE_MINUTES={{ access_token_expire_minutes }}
CORS_ORIGINS={{ cors_origins | join(',') }}
STATIC_URL={{ static_url }}
DEBUG={{ debug_mode | lower }}
API_PREFIX={{ api_prefix }}
PORT={{ backend_port }}
BACKEND_PORT={{ backend_port }}
LOG_LEVEL={{ log_level }}

# PhpMyAdmin
PHPMYADMIN_PORT={{ phpmyadmin_port }}

# Docker Configuration
GITHUB_REPOSITORY_OWNER={{ github_repository_owner }}

{% if environment == 'production' %}
# Production Domain
DOMAIN_NAME={{ domain_name }}

# Monitoring Configuration
{% if monitoring_enabled %}
PROMETHEUS_PORT={{ prometheus_port }}
GRAFANA_PORT={{ grafana_port }}
CADVISOR_PORT={{ cadvisor_port }}
GRAFANA_ADMIN_PASSWORD={{ grafana_admin_password | default('admin123') }}
{% endif %}

# Cache Configuration
{% if redis_enabled | default(false) %}
REDIS_PORT={{ redis_port }}
REDIS_PASSWORD={{ redis_password | default('redis123') }}
{% endif %}

# Performance Configuration
WORKER_PROCESSES={{ worker_processes }}
MAX_CONNECTIONS={{ max_connections }}
REQUEST_TIMEOUT={{ request_timeout }}
KEEPALIVE_TIMEOUT={{ keepalive_timeout }}

# Security Configuration
SECURE_COOKIES={{ secure_cookies | lower }}
SESSION_TIMEOUT={{ session_timeout }}
RATE_LIMITING={{ rate_limiting | lower }}
{% if rate_limiting %}
RATE_LIMIT_REQUESTS={{ rate_limit_requests }}
RATE_LIMIT_WINDOW={{ rate_limit_window }}
{% endif %}

# File Upload Configuration
MAX_FILE_SIZE_MB={{ max_file_size_mb }}
ALLOWED_FILE_TYPES={{ allowed_file_types | join(',') }}

# SSL Configuration
SSL_ENABLED={{ ssl_enabled | lower }}

# Content Security Policy
{% if csp_enabled | default(false) %}
CSP_ENABLED={{ csp_enabled | lower }}
{% endif %}

# Caching
CACHE_TTL={{ cache_ttl }}
STATIC_FILES_CACHE_MAX_AGE={{ static_files_cache_max_age }}
API_CACHE_MAX_AGE={{ api_cache_max_age }}

# Logging
LOG_FORMAT={{ log_format | default('standard') }}
LOG_ROTATION={{ log_rotation | lower }}
LOG_MAX_SIZE={{ log_max_size }}

{% else %}
# Development Configuration
AUTO_RELOAD={{ auto_reload | lower }}
DEBUG_TOOLBAR={{ debug_toolbar | lower }}
SQL_ECHO={{ sql_echo | lower }}

# File Upload Configuration
MAX_FILE_SIZE_MB={{ max_file_size_mb }}
ALLOWED_FILE_TYPES={{ allowed_file_types | join(',') }}

# Performance (Development)
WORKER_PROCESSES={{ worker_processes }}
MAX_CONNECTIONS={{ max_connections }}

# Database Pool Settings
DB_POOL_SIZE={{ db_pool_size }}
DB_MAX_OVERFLOW={{ db_max_overflow }}
DB_POOL_TIMEOUT={{ db_pool_timeout }}
DB_POOL_RECYCLE={{ db_pool_recycle }}

# Cache Configuration
CACHE_TTL={{ cache_ttl }}

{% endif %}

# Health Check Configuration
HEALTH_CHECK_ENABLED={{ health_check_enabled | default(true) | lower }}

# Application Metadata
APP_VERSION={{ app_version | default('latest') }}
DEPLOYMENT_DATE={{ ansible_date_time.iso8601 }}
ENVIRONMENT={{ environment }}
